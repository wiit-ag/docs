<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>VPN as a Service | Documentation</title><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="VPN as a Service" /><meta property="og:locale" content="en" /><meta name="description" content="VPN as a Service (VPNaaS)" /><meta property="og:description" content="VPN as a Service (VPNaaS)" /><link rel="canonical" href="/optimist/networking/vpnaas/" /><meta property="og:url" content="/optimist/networking/vpnaas/" /><meta property="og:site_name" content="Documentation" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-05-16T20:56:12+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="VPN as a Service" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-05-16T20:56:12+00:00","datePublished":"2024-05-16T20:56:12+00:00","description":"VPN as a Service (VPNaaS)","headline":"VPN as a Service","mainEntityOfPage":{"@type":"WebPage","@id":"/optimist/networking/vpnaas/"},"url":"/optimist/networking/vpnaas/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"><svg class="site-logo" width="44" height="51" viewBox="0 0 44 51" fill="none" focusable="false" xmlns="http://www.w3.org/2000/svg"><path d="M21.9985 0L32.9985 6.35022L38.1104 9.30107L31.1561 13.3166L29.5221 12.3727L21.9985 8.02952L14.4749 12.3727L6.95126 16.716V25.4024V34.0888L14.4749 38.432L21.9985 42.7753L29.5221 38.432L44 30.0733V38.1043L33 44.4561L22 50.8063L11 44.4561L0 38.1043V25.4024V12.7004L11 6.34871L21.9985 0ZM21.9985 34.6597L29.1657 30.5218L36.4764 26.3009L44 21.9577V13.9267L33 20.2784L22 26.6301V34.6597H21.9985ZM28.9543 30.6441L29.1672 30.5218L28.9543 30.6441Z" fill="#111" /><path d="M21.9985 34.6588L29.1658 30.5209L36.4764 26.3L44 21.9568V13.9258L33 20.2775L22 26.6292V34.6588H21.9985ZM28.9543 30.6432L29.1673 30.5209L28.9543 30.6432Z" fill="#111" /> </svg><div class="rp_title"> Documentation</div></a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"></ul><div class="nav-category">Elastic Cloud Enterprise</div><ul class="nav-list"><li class="nav-list-item"><a href="/ece/intro" class="nav-list-link">Introduction</a><li class="nav-list-item"><a href="/ece/shipdata/" class="nav-list-link">Shipping data to Elastic</a><li class="nav-list-item"><a href="/ece/updateilm/" class="nav-list-link">Changing Lifecycle Policies</a></ul><div class="nav-category">GKS</div><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in About GKS category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gks/about/" class="nav-list-link">About GKS</a><ul class="nav-list"><li class="nav-list-item "><a href="/gks/about/changelog-v2.21/" class="nav-list-link">GKS Changelog v2.21</a><li class="nav-list-item "><a href="/gks/about/changelog-v2.20/" class="nav-list-link">GKS Changelog v2.20</a><li class="nav-list-item "><a href="/gks/about/changelog-v2.19/" class="nav-list-link">GKS Changelog v2.19</a><li class="nav-list-item "><a href="/gks/about/changelog-v2.18/" class="nav-list-link">GKS Changelog v2.18</a><li class="nav-list-item "><a href="/gks/about/changelog-v2.17/" class="nav-list-link">GKS Changelog v2.17</a><li class="nav-list-item "><a href="/gks/about/kubernetesversions/" class="nav-list-link">Supported Kubernetes Versions</a></ul><li class="nav-list-item"><a href="/gks/gettingstarted/" class="nav-list-link">Getting Started</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Managing GKS Projects category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gks/managingprojects/" class="nav-list-link">Managing GKS Projects</a><ul class="nav-list"><li class="nav-list-item "><a href="/gks/managingprojects/creatingaproject/" class="nav-list-link">Creating a Project</a><li class="nav-list-item "><a href="/gks/managingprojects/projectusermanagement/" class="nav-list-link">Managing Users in a Project</a><li class="nav-list-item "><a href="/gks/managingprojects/projectserviceaccounts/" class="nav-list-link">Managing Service Account Tokens</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cluster Lifecycle category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gks/clusterlifecycle/" class="nav-list-link">Cluster Lifecycle</a><ul class="nav-list"><li class="nav-list-item "><a href="/gks/clusterlifecycle/creatingacluster/" class="nav-list-link">Creating a Cluster</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/clustertemplates/" class="nav-list-link">Cluster Templates</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/upgradingacluster/" class="nav-list-link">Kubernetes Updates</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/cnichoices/" class="nav-list-link">CNI Choices</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/upgradingcni/" class="nav-list-link">CNI Updates</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/controlplaneconnector/" class="nav-list-link">Control Plane Connector</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/openstackcredentials/" class="nav-list-link">Changing Openstack Credentials</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/applicationcredentials/" class="nav-list-link">Using Openstack Application Credentials</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/deletingacluster/" class="nav-list-link">Deleting a Cluster</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/deprecationpolicy/" class="nav-list-link">Deprecation Policy</a><li class="nav-list-item "><a href="/gks/clusterlifecycle/clustermigrations/containerruntimeengine/" class="nav-list-link">Migration Container Runtime Engine</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cluster Backups category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gks/clusterbackups/" class="nav-list-link">Cluster Backups</a><ul class="nav-list"><li class="nav-list-item "><a href="/gks/clusterbackups/etcdbackups/" class="nav-list-link">Etcd Backups and Restore</a><li class="nav-list-item "><a href="/gks/clusterbackups/restorepvcfromvolume/" class="nav-list-link">Restore a PVC from an Existing Openstack Volume</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Machine Deployments category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gks/machinedeployments/" class="nav-list-link">Machine Deployments</a><ul class="nav-list"><li class="nav-list-item "><a href="/gks/machinedeployments/machinedeployment/" class="nav-list-link">Machine Deployment</a><li class="nav-list-item "><a href="/gks/machinedeployments/nodeflavors/" class="nav-list-link">Choosing Node Flavors/Sizes</a><li class="nav-list-item "><a href="/gks/machinedeployments/clusternodesusagerate/" class="nav-list-link">Cluster Nodes Usage Rate</a><li class="nav-list-item "><a href="/gks/machinedeployments/add_ssh_key/" class="nav-list-link">Adding an SSH Key to an Existing Cluster</a><li class="nav-list-item "><a href="/gks/machinedeployments/updatingnodeos/" class="nav-list-link">Updating the OS of Worker Nodes</a><li class="nav-list-item "><a href="/gks/machinedeployments/multipleavailabilityzones/" class="nav-list-link">Multiple Availability Zones</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Access Management category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gks/accessmanagement/" class="nav-list-link">Access Management</a><ul class="nav-list"><li class="nav-list-item "><a href="/gks/accessmanagement/connectingtoacluster/" class="nav-list-link">Project-Based Access</a><li class="nav-list-item "><a href="/gks/accessmanagement/usingrbac/" class="nav-list-link">Role-Based Access Control (RBAC)</a><li class="nav-list-item "><a href="/gks/accessmanagement/revokingtoken/" class="nav-list-link">Revoking Tokens</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Kubernetes Applications category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gks/k8sapplications/" class="nav-list-link">Kubernetes Applications</a><ul class="nav-list"><li class="nav-list-item "><a href="/gks/k8sapplications/runningapplications/" class="nav-list-link">Running Applications in Kubernetes</a><li class="nav-list-item "><a href="/gks/k8sapplications/serviceaccounts/" class="nav-list-link">Managing Service Accounts</a><li class="nav-list-item "><a href="/gks/k8sapplications/externaldnsanddesignate/" class="nav-list-link">ExternalDNS with Designate</a><li class="nav-list-item "><a href="/gks/k8sapplications/timezones/" class="nav-list-link">Time Zone Management</a><li class="nav-list-item "><a href="/gks/k8sapplications/storageclasses/" class="nav-list-link">StorageClass Setup</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Add-On category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gks/addons/" class="nav-list-link">Add-On</a><ul class="nav-list"><li class="nav-list-item "><a href="/gks/addons/cluster-autoscaler/" class="nav-list-link">Cluster Autoscaler</a></ul></ul><div class="nav-category">Oncite Open Edition</div><ul class="nav-list"><li class="nav-list-item"><a href="/edge/productoverview/" class="nav-list-link">Product Overview</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Operations Center category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/edge/operationscenter/" class="nav-list-link">Operations Center</a><ul class="nav-list"><li class="nav-list-item "><a href="/edge/operationscenter/vpnaas/" class="nav-list-link">VPN as a Service</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Openstack category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/edge/openstack/" class="nav-list-link">Openstack</a><ul class="nav-list"><li class="nav-list-item "><a href="/edge/openstack/create_vm/" class="nav-list-link">Create VM</a></ul><li class="nav-list-item"><a href="/edge/faq/" class="nav-list-link">FAQ</a></ul><div class="nav-category">Optimist</div><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Guided Tour category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/guided_tour/" class="nav-list-link">Guided Tour</a><ul class="nav-list"><li class="nav-list-item "><a href="/optimist/guided_tour/step01/" class="nav-list-link">01: The Horizon (Dashboard)</a><li class="nav-list-item "><a href="/optimist/guided_tour/step02/" class="nav-list-link">02: Create an SSH-Key with the Horizon (Dashboard)</a><li class="nav-list-item "><a href="/optimist/guided_tour/step03/" class="nav-list-link">03: Spawn a new Stack</a><li class="nav-list-item "><a href="/optimist/guided_tour/step04/" class="nav-list-link">04: Your way to the console</a><li class="nav-list-item "><a href="/optimist/guided_tour/step05/" class="nav-list-link">05: An overview of the most important OpenStackClient commands</a><li class="nav-list-item "><a href="/optimist/guided_tour/step06/" class="nav-list-link">06: Create and use your own SSH-Key</a><li class="nav-list-item "><a href="/optimist/guided_tour/step07/" class="nav-list-link">07: The first VM</a><li class="nav-list-item "><a href="/optimist/guided_tour/step08/" class="nav-list-link">08: Delete the first VM</a><li class="nav-list-item "><a href="/optimist/guided_tour/step09/" class="nav-list-link">09: Security Groups</a><li class="nav-list-item "><a href="/optimist/guided_tour/step10/" class="nav-list-link">10: Get access to the Internet; Create a network</a><li class="nav-list-item "><a href="/optimist/guided_tour/step11/" class="nav-list-link">11: Prepare access to the Internet; Add IPv6 to your network</a><li class="nav-list-item "><a href="/optimist/guided_tour/step12/" class="nav-list-link">12: A usable VM</a><li class="nav-list-item "><a href="/optimist/guided_tour/step13/" class="nav-list-link">13: The structured way to create an instance (with stacks)</a><li class="nav-list-item "><a href="/optimist/guided_tour/step14/" class="nav-list-link">14: Your first steps with HEAT</a><li class="nav-list-item "><a href="/optimist/guided_tour/step15/" class="nav-list-link">15: The first heat template</a><li class="nav-list-item "><a href="/optimist/guided_tour/step16/" class="nav-list-link">16: Get to know HEAT better</a><li class="nav-list-item "><a href="/optimist/guided_tour/step17/" class="nav-list-link">17: The network in Heat</a><li class="nav-list-item "><a href="/optimist/guided_tour/step18/" class="nav-list-link">18: Making your VM reachable via IPv4</a><li class="nav-list-item "><a href="/optimist/guided_tour/step19/" class="nav-list-link">19: Add IPv6 to your template</a><li class="nav-list-item "><a href="/optimist/guided_tour/step20/" class="nav-list-link">20: Build multiple VMs with HEAT</a><li class="nav-list-item "><a href="/optimist/guided_tour/step21/" class="nav-list-link">21: Start a VM with an SSD volume</a><li class="nav-list-item "><a href="/optimist/guided_tour/step22/" class="nav-list-link">22: Create a DNS record in Designate</a><li class="nav-list-item "><a href="/optimist/guided_tour/step23/" class="nav-list-link">23: Object Storage (S3 compatible)</a></ul><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in Networking category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/networking/" class="nav-list-link">Networking</a><ul class="nav-list"><li class="nav-list-item "><a href="/optimist/networking/port_forwarding/" class="nav-list-link">Port Forwarding on Floating IPs</a><li class="nav-list-item "><a href="/optimist/networking/shared_networks/" class="nav-list-link">Shared Networks</a><li class="nav-list-item active"><a href="/optimist/networking/vpnaas/" class="nav-list-link active">VPN as a Service</a><li class="nav-list-item "><a href="/optimist/networking/octavia_loadbalancer/" class="nav-list-link">Octavia Loadbalancers</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Storage category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/storage/" class="nav-list-link">Storage</a><ul class="nav-list"><li class="nav-list-item "><button class="nav-list-expander btn-reset" aria-label="toggle items in S3 Compatible Object Storage category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/storage/s3_documentation/" class="nav-list-link">S3 Compatible Object Storage</a><ul class="nav-list"><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/createanduses3credentials/" class="nav-list-link">Create and Use S3 Credentials</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/createanddeletebucket/" class="nav-list-link">Create and Delete a Bucket</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/uploadanddeleteobject/" class="nav-list-link">Upload and delete an object</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/versioning/" class="nav-list-link">Enable and Disable Versioning, and Delete a versioned object</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/security/" class="nav-list-link">S3 Security</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/swiftservestaticwebsite/" class="nav-list-link">Swift - Serving a Static Website</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/backupwithrestic/" class="nav-list-link">Secure Backups with Restic and Rclone</a></ul><li class="nav-list-item "><a href="/optimist/storage/localstorage/" class="nav-list-link">Localstorage</a></ul><li class="nav-list-item"><a href="/optimist/faq/" class="nav-list-link">FAQ</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Specifications category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/specs/" class="nav-list-link">Specifications</a><ul class="nav-list"><li class="nav-list-item "><a href="/optimist/specs/flavor_specification/" class="nav-list-link">Flavor Specifications</a><li class="nav-list-item "><a href="/optimist/specs/default_quota/" class="nav-list-link">Default Quotas</a><li class="nav-list-item "><a href="/optimist/specs/application_credentials/" class="nav-list-link">Application Credentials</a><li class="nav-list-item "><a href="/optimist/specs/volume_specification/" class="nav-list-link">Volume Specifications</a><li class="nav-list-item "><a href="/optimist/specs/images/" class="nav-list-link">Images</a><li class="nav-list-item "><a href="/optimist/specs/shelving_instances/" class="nav-list-link">Shelving Instances</a></ul><li class="nav-list-item"><a href="/optimist/changelog/" class="nav-list-link">Changelog</a></ul></nav><a href="https://gec.io/company/zertifizierungen/" target="_blank"><div style="display: flex; justify-content: space-between; padding: 16px; width: 280px"> <img id="isoimage" src="https://s3.es1.fra.optimist.gec.io/swift/v1/static/docs/iso9001.webp" alt="ISO 9001" style="flex-grow: 1; object-fit: contain; height: 1.5rem; "> <img src="https://s3.es1.fra.optimist.gec.io/swift/v1/static/docs/iso27001.webp" alt="ISO 27001" style="flex-grow: 1; object-fit: contain; height: 1.5rem; "> <img src="https://s3.es1.fra.optimist.gec.io/swift/v1/static/docs/isae-3402-t2certified-logo-cmyk1-page-001_rdax_565x282_100.webp" alt="ISAE 3402" style="flex-grow: 1; object-fit: contain; height: 1.5rem;"></div></a> <script language="javascript" type="text/javascript"> var d = new Date(); document.getElementById("isoimage").src = "https://s3.es1.fra.optimist.gec.io/swift/v1/static/docs/iso9001.webp?ver=" + d.getTime(); </script></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Documentation" aria-label="Search Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><ul class="language-list"><li class="language-list-item"> <a class="language-list-link active" href=" /optimist/networking/vpnaas/ " >English</a ><li class="language-list-item"> <a class="language-list-link" href=" /de/optimist/networking/vpnaas/ " >Deutsch</a ></ul></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/optimist/networking/">Networking</a><li class="breadcrumb-nav-list-item"><span>VPN as a Service</span></ol></nav><div id="main-content" class="main-content"><main><h1 id="vpn-as-a-service-vpnaas"> <a href="#vpn-as-a-service-vpnaas" class="anchor-heading" aria-labelledby="vpn-as-a-service-vpnaas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> VPN as a Service (VPNaaS)</h1><p>OpenStack supports on demand Site-to-Site VPNs as a service. This allows the user to connect two private networks to each other. To achieve this, OpenStack will configure a fully functional IPsec VPN within a project, without the need for additional networking VMs.</p><h2 id="setting-up-a-site-to-site-ipsec-vpn"> <a href="#setting-up-a-site-to-site-ipsec-vpn" class="anchor-heading" aria-labelledby="setting-up-a-site-to-site-ipsec-vpn"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up a Site-to-Site IPSec VPN</h2><h3 id="create-left-and-right-networks-and-subnets"> <a href="#create-left-and-right-networks-and-subnets" class="anchor-heading" aria-labelledby="create-left-and-right-networks-and-subnets"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create left and right networks and subnets</h3><p>Before we can create a VPN, we need two separate networks to connect to each other. For this guide, we will create these networks in two different OpenStack projects which will be referred to as “left” and “right”. The following steps have to be repeated for both networks (“left” and “right”), assuming you want to connect two different OpenStack clusters. For the sake of simplicity, this guide will only demonstrate how to create the left network. For OpenStack, the steps to create the right network are exactly the same with exception to naming and subnet prefix In this example, we will be using the subnet prefix <code class="language-plaintext highlighter-rouge">2001:db8:1:33bc::/64</code> for the left network and <code class="language-plaintext highlighter-rouge">2001:db8:1:33bd::/64</code> for the right.</p><p><strong>If you already have two networks you would like to connect via Site-to-Site VPN, you can skip to <a href="#Create-IKE-and-IPSec-policies-on-both-sides">creating IKE and IPSec policies</a></strong>.</p><h4 id="using-horizon-gui"> <a href="#using-horizon-gui" class="anchor-heading" aria-labelledby="using-horizon-gui"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Horizon (GUI)</h4><ol><li>Create the left network with a new subnet.</ol><p>Within your project, navigate to <em>Network → Networks</em> and click <em>Create Network</em>.</p><p><a href="https://optimist.gec.io/project/networks/"><img src="attachments/horizon_create_network.png" alt="" /></a></p><p>Give your new network a name, select <em>Enable Admin State</em> to enable the network and <em>Create Subnet</em> to create the network and subnet all in one step. Click <em>Next</em>.</p><p><a href="https://optimist.gec.io/project/networks/"><img src="attachments/horizon_create_network_network.png" alt="" /></a></p><p>Assign a name to your new network subnet, select <em>Enter Network Address manually</em> and enter your desired subnet within <em>Network Address</em>, if you would like to use your own subnet. To use a subnet from a predefined pool instead, select <em>Allocate Network Address from a pool</em> and pick a pool. Click <em>Next</em>.</p><p><strong>For documentation purposes, we will be using our own previously mentioned prefixes.</strong></p><p><a href="https://optimist.gec.io/project/networks/"><img src="attachments/horizon_create_network_subnet.png" alt="" /></a></p><p>Select <em>Enable DHCP</em> and <em>IPv6 Address Configuration Mode</em> “DHCPV6 STATEFUL”. Allocation pools will be generated automatically. Click <em>Create</em>.</p><p><a href="https://optimist.gec.io/project/networks/"><img src="attachments/horizon_create_network_subnet_details.png" alt="" /></a></p><h4 id="using-the-cli"> <a href="#using-the-cli" class="anchor-heading" aria-labelledby="using-the-cli"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the CLI</h4><ol><li>Create the left network using the <code class="language-plaintext highlighter-rouge">openstack network create</code> command.</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack network create vpnaas-left-network
+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | UP                                   |
| availability_zone_hints   |                                      |
| availability_zones        |                                      |
| created_at                | 2022-09-12T12:45:42Z                 |
| description               |                                      |
| dns_domain                |                                      |
| id                        | ff7c61f1-4dcb-49bf-be9f-efdcaa1e0aaa |
| ipv4_address_scope        | None                                 |
| ipv6_address_scope        | None                                 |
| is_default                | False                                |
| is_vlan_transparent       | None                                 |
| mtu                       | 1500                                 |
| name                      | vpnaas-left-network                  |
| port_security_enabled     | True                                 |
| project_id                | 281fa14f782e4d4cbfd4e34a121c2680     |
| provider:network_type     | None                                 |
| provider:physical_network | None                                 |
| provider:segmentation_id  | None                                 |
| qos_policy_id             | None                                 |
| revision_number           | 1                                    |
| router:external           | Internal                             |
| segments                  | None                                 |
| shared                    | False                                |
| status                    | ACTIVE                               |
| subnets                   |                                      |
| tags                      |                                      |
| updated_at                | 2022-09-12T12:45:42Z                 |
+---------------------------+--------------------------------------+
</code></pre></div></div><ol><li>Create a new subnet and allocate it to the newly created network, using the <code class="language-plaintext highlighter-rouge">openstack subnet create</code> command.</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack subnet create \
  vpnaas-left-network-subnet \
  --subnet-range 2001:db8:1:33bc::/64 --ip-version 6 \
  --network vpnaas-left-network
+----------------------+--------------------------------------------------------+
| Field                | Value                                                  |
+----------------------+--------------------------------------------------------+
| allocation_pools     | 2001:db8:1:33bc::1-2001:db8:1:33bc:ffff:ffff:ffff:ffff |
| cidr                 | 2001:db8:1:33bc::/64                                   |
| created_at           | 2022-09-12T12:47:51Z                                   |
| description          |                                                        |
| dns_nameservers      |                                                        |
| dns_publish_fixed_ip | None                                                   |
| enable_dhcp          | True                                                   |
| gateway_ip           | 2001:db8:1:33bc::                                      |
| host_routes          |                                                        |
| id                   | e217a377-48c7-4c18-93b5-cfd805bde40a                   |
| ip_version           | 6                                                      |
| ipv6_address_mode    | None                                                   |
| ipv6_ra_mode         | None                                                   |
| name                 | vpnaas-left-network-subnet                             |
| network_id           | ff7c61f1-4dcb-49bf-be9f-efdcaa1e0aaa                   |
| project_id           | 281fa14f782e4d4cbfd4e34a121c2680                       |
| revision_number      | 0                                                      |
| segment_id           | None                                                   |
| service_types        |                                                        |
| subnetpool_id        | None                                                   |
| tags                 |                                                        |
| updated_at           | 2022-09-12T12:47:51Z                                   |
+----------------------+--------------------------------------------------------+
</code></pre></div></div><h3 id="create-left-and-right-routers"> <a href="#create-left-and-right-routers" class="anchor-heading" aria-labelledby="create-left-and-right-routers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create left and right routers</h3><h4 id="using-horizon-gui-1"> <a href="#using-horizon-gui-1" class="anchor-heading" aria-labelledby="using-horizon-gui-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Horizon (GUI)</h4><ol><li>Create a router with the provider network as an external gateway.</ol><p>Within your project, navigate to <em>Network → Routers</em> and click <em>Create Router</em>.</p><p><a href="https://optimist.gec.io/project/routers/"><img src="attachments/horizon_create_router.png" alt="" /></a></p><p>Give your new router a name, select <em>Enable Admin State</em> to enable the router and “PROVIDER” as “External Network”. Click Create Router.</p><p><a href="https://optimist.gec.io/project/routers/"><img src="attachments/horizon_create_router_details.png" alt="" /></a></p><h4 id="using-the-cli-1"> <a href="#using-the-cli-1" class="anchor-heading" aria-labelledby="using-the-cli-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the CLI</h4><ol><li>Create a router using the <code class="language-plaintext highlighter-rouge">openstack router create</code> command.</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack router create vpnaas-left-router
+-------------------------+--------------------------------------+
| Field                   | Value                                |
+-------------------------+--------------------------------------+
| admin_state_up          | UP                                   |
| availability_zone_hints |                                      |
| availability_zones      |                                      |
| created_at              | 2022-09-12T12:48:15Z                 |
| description             |                                      |
| enable_ndp_proxy        | None                                 |
| external_gateway_info   | null                                 |
| flavor_id               | None                                 |
| id                      | 052e968a-a63b-4824-b904-eb70c42c53e5 |
| name                    | vpnaas-left-router                   |
| project_id              | 281fa14f782e4d4cbfd4e34a121c2680     |
| revision_number         | 2                                    |
| routes                  |                                      |
| status                  | ACTIVE                               |
| tags                    |                                      |
| tenant_id               | 281fa14f782e4d4cbfd4e34a121c2680     |
| updated_at              | 2022-09-12T12:48:15Z                 |
+-------------------------+--------------------------------------+
</code></pre></div></div><ol><li>Use the <code class="language-plaintext highlighter-rouge">openstack router set</code> command to set the provider network as an external gateway for the router.</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack router set vpnaas-left-router --external-gateway provider
</code></pre></div></div><h3 id="attach-the-subnet-to-the-router"> <a href="#attach-the-subnet-to-the-router" class="anchor-heading" aria-labelledby="attach-the-subnet-to-the-router"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attach the subnet to the router</h3><h4 id="using-horizon-gui-2"> <a href="#using-horizon-gui-2" class="anchor-heading" aria-labelledby="using-horizon-gui-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Horizon (GUI)</h4><p>Within your project, navigate to <em>Network → Routers</em> and select the previously created router.</p><p><a href="https://optimist.gec.io/project/routers/"><img src="attachments/horizon_select_router.png" alt="" /></a></p><p>Select <em>Interfaces</em> and click <em>Add Interface</em>.</p><p><a href="https://optimist.gec.io/project/routers/"><img src="attachments/horizon_router_interfaces_add.png" alt="" /></a></p><p>Select your subnet and click <em>Submit</em>.</p><p><a href="https://optimist.gec.io/project/routers/"><img src="attachments/horizon_router_interfaces_add_details.png" alt="" /></a></p><h4 id="using-the-cli-2"> <a href="#using-the-cli-2" class="anchor-heading" aria-labelledby="using-the-cli-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the CLI</h4><p>Use the <code class="language-plaintext highlighter-rouge">openstack router add subnet</code> command to add the subnet to the router.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack router add subnet vpnaas-left-router vpnaas-left-network-subnet
</code></pre></div></div><h3 id="create-ike-and-ipsec-policies-on-both-sides"> <a href="#create-ike-and-ipsec-policies-on-both-sides" class="anchor-heading" aria-labelledby="create-ike-and-ipsec-policies-on-both-sides"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create IKE and IPSec policies on both sides</h3><p>The IKE and IPSec policies need to be configured identically on both sides. For the purpose of this guide, we will be using the following parameters.</p><div class="table-wrapper"><table><thead><tr><th>Parameter<th>IKE Policy<th>IPSec Policy<tbody><tr><td>Authorization algorithm<td><code class="language-plaintext highlighter-rouge">SHA256</code><td><code class="language-plaintext highlighter-rouge">SHA256</code><tr><td>Encryption algorithm<td><code class="language-plaintext highlighter-rouge">AES-256</code><td><code class="language-plaintext highlighter-rouge">AES-256</code><tr><td>Encapsulation mode<td>N/A<td><code class="language-plaintext highlighter-rouge">TUNNEL</code><tr><td>IKE Version<td><code class="language-plaintext highlighter-rouge">V2</code><td>N/A<tr><td>Perfect Forward Secrecy<td><code class="language-plaintext highlighter-rouge">GROUP14</code><td><code class="language-plaintext highlighter-rouge">GROUP14</code><tr><td>Transform Protocol<td>N/A<td><code class="language-plaintext highlighter-rouge">ESP</code></table></div><h4 id="using-horizon-gui-3"> <a href="#using-horizon-gui-3" class="anchor-heading" aria-labelledby="using-horizon-gui-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Horizon (GUI)</h4><ol><li>Create the IKE policy</ol><p>Within your project, navigate to <em>Network → VPN</em>, select <em>IKE Policies</em> and click <em>Add IKE Policy</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_ike_policy.png" alt="" /></a></p><p>Give your IKE policy a name, and fill in the IKE policy parameters. Click <em>Add</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_ike_policy_details.png" alt="" /></a></p><ol><li>Create the IPSec policy.</ol><p>Still within <em>Network → VPN</em>, select IPSec Policies and click <em>Add IPsec Policy</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_ipsec_policy.png" alt="" /></a></p><p>Give your IPSec policy a name, and fill in the IPSec policy parameters. Click <em>Add</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_ipsec_policy_details.png" alt="" /></a></p><h4 id="using-the-cli-3"> <a href="#using-the-cli-3" class="anchor-heading" aria-labelledby="using-the-cli-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the CLI</h4><ol><li>Create the IKE policy using the <code class="language-plaintext highlighter-rouge">openstack vpn ike policy create</code> command.</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack vpn ike policy create \
  vpnaas-left-ike-policy \
  --auth-algorithm sha256 \
  --encryption-algorithm aes-256 \
  --ike-version v2 \
  --pfs group14
+-------------------------------+--------------------------------------+
| Field                         | Value                                |
+-------------------------------+--------------------------------------+
| Authentication Algorithm      | sha256                               |
| Description                   |                                      |
| Encryption Algorithm          | aes-256                              |
| ID                            | 561387b8-b5c1-415e-abc9-79ba93dd48ff |
| IKE Version                   | v2                                   |
| Lifetime                      | {'units': 'seconds', 'value': 3600}  |
| Name                          | vpnaas-left-ike-policy               |
| Perfect Forward Secrecy (PFS) | group14                              |
| Phase1 Negotiation Mode       | main                                 |
| Project                       | 281fa14f782e4d4cbfd4e34a121c2680     |
| project_id                    | 281fa14f782e4d4cbfd4e34a121c2680     |
+-------------------------------+--------------------------------------+
</code></pre></div></div><ol><li>Create the IPSec policy using the <code class="language-plaintext highlighter-rouge">openstack vpn ipsec policy create</code> command.</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack vpn ipsec policy create \
  vpnaas-left-ipsec-policy \
  --auth-algorithm sha256 \
  --encryption-algorithm aes-256 \
  --pfs group14 \
  --transform-protocol esp
+-------------------------------+--------------------------------------+
| Field                         | Value                                |
+-------------------------------+--------------------------------------+
| Authentication Algorithm      | sha256                               |
| Description                   |                                      |
| Encapsulation Mode            | tunnel                               |
| Encryption Algorithm          | aes-256                              |
| ID                            | 553a600e-f39d-47a0-9550-97f2b4033685 |
| Lifetime                      | {'units': 'seconds', 'value': 3600}  |
| Name                          | vpnaas-left-ipsec-policy             |
| Perfect Forward Secrecy (PFS) | group14                              |
| Project                       | 281fa14f782e4d4cbfd4e34a121c2680     |
| Transform Protocol            | esp                                  |
| project_id                    | 281fa14f782e4d4cbfd4e34a121c2680     |
+-------------------------------+--------------------------------------+
</code></pre></div></div><h3 id="create-the-vpn-service-on-both-sides"> <a href="#create-the-vpn-service-on-both-sides" class="anchor-heading" aria-labelledby="create-the-vpn-service-on-both-sides"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create the VPN service on both sides</h3><h4 id="using-horizon-gui-4"> <a href="#using-horizon-gui-4" class="anchor-heading" aria-labelledby="using-horizon-gui-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Horizon (GUI)</h4><p>Within your project, navigate to <em>Network → VPN</em>, select <em>VPN Services</em> and click <em>Add VPN Service</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_vpn.png" alt="" /></a></p><p>Give your VPN service a name, select your router and <em>Enable Admin State</em>. A subnet is not needed as we will be using endpoint groups. Click <em>Add</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_vpn_details.png" alt="" /></a></p><h4 id="using-the-cli-4"> <a href="#using-the-cli-4" class="anchor-heading" aria-labelledby="using-the-cli-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the CLI</h4><p>Use the <code class="language-plaintext highlighter-rouge">openstack vpn service create</code> command to create the VPN service.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack vpn service create vpnaas-left-vpn --router vpnaas-left-router
+----------------+--------------------------------------+
| Field          | Value                                |
+----------------+--------------------------------------+
| Description    |                                      |
| Flavor         | None                                 |
| ID             | cc258fd7-0e87-4058-ad7d-355f32c1ab5e |
| Name           | vpnaas-left-vpn                      |
| Project        | 281fa14f782e4d4cbfd4e34a121c2680     |
| Router         | 052e968a-a63b-4824-b904-eb70c42c53e5 |
| State          | True                                 |
| Status         | PENDING_CREATE                       |
| Subnet         | None                                 |
| external_v4_ip | 185.116.244.85                       |
| external_v6_ip | 2a00:c320:1003::23a                  |
| project_id     | 281fa14f782e4d4cbfd4e34a121c2680     |
+----------------+--------------------------------------+
</code></pre></div></div><h3 id="create-the-endpoint-groups"> <a href="#create-the-endpoint-groups" class="anchor-heading" aria-labelledby="create-the-endpoint-groups"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create the endpoint groups</h3><p class="warning">When using multiple subnets, make sure your VPN endpoint supports routing multiple subnets through the same connection. While OpenStack does, for implementations that do not support this, multiple endpoint groups need to be created, one for each subnet.</p><h4 id="using-horizon-gui-5"> <a href="#using-horizon-gui-5" class="anchor-heading" aria-labelledby="using-horizon-gui-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Horizon (GUI)</h4><ol><li>Create the local endpoint group for the left side.</ol><p>Within your project, navigate to <em>Network → VPN</em>, select <em>Endpoint Groups</em> and click <em>Add Endpoint Group</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_endpoint_group.png" alt="" /></a></p><p>Give your endpoint group a name, select the <em>Type</em> “Subnet” and select your subnet under <em>Local System Subnets</em>. Click <em>Add</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_endpoint_group_left_local_details.png" alt="" /></a></p><ol><li>Create the peer endpoint group for the left side.</ol><p>Still within <em>Network → VPN</em>, Endpoint Groups, click <em>Add Endpoint Group</em> again.</p><p>Give your endpoint group a name, select the <em>Type</em> “CIDR” and enter the subnet of the right side. Click <em>Add</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_endpoint_group_left_remote_details.png" alt="" /></a></p><h4 id="using-the-cli-5"> <a href="#using-the-cli-5" class="anchor-heading" aria-labelledby="using-the-cli-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the CLI</h4><ol><li>Use the <code class="language-plaintext highlighter-rouge">openstack vpn endpoint group create</code> command to create the local endpoint group for the left side.</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack vpn endpoint group create \
  vpnaas-left-local \
  --type subnet \
  --value vpnaas-left-network-subnet
+-------------+------------------------------------------+
| Field       | Value                                    |
+-------------+------------------------------------------+
| Description |                                          |
| Endpoints   | ['e217a377-48c7-4c18-93b5-cfd805bde40a'] |
| ID          | 949ccc53-5dc6-457d-95bf-278fdf9a3e5d     |
| Name        | vpnaas-left-local                        |
| Project     | 281fa14f782e4d4cbfd4e34a121c2680         |
| Type        | subnet                                   |
| project_id  | 281fa14f782e4d4cbfd4e34a121c2680         |
+-------------+------------------------------------------+
</code></pre></div></div><ol><li>Use the <code class="language-plaintext highlighter-rouge">openstack vpn endpoint group create</code> command again to create the peer endpoint group for the left side.</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack vpn endpoint group create \
  vpnaas-left-remote \
  --type cidr \
  --value  2001:db8:1:33bd::/64
+-------------+--------------------------------------+
| Field       | Value                                |
+-------------+--------------------------------------+
| Description |                                      |
| Endpoints   | ['2001:db8:1:33bd::/64']             |
| ID          | 9146346d-1306-4b03-a3ce-04ee51832ed8 |
| Name        | vpnaas-left-remote                   |
| Project     | 281fa14f782e4d4cbfd4e34a121c2680     |
| Type        | cidr                                 |
| project_id  | 281fa14f782e4d4cbfd4e34a121c2680     |
+-------------+--------------------------------------+
</code></pre></div></div><h3 id="create-the-site-connections"> <a href="#create-the-site-connections" class="anchor-heading" aria-labelledby="create-the-site-connections"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create the site connections</h3><p class="warning">Just like with the endpoint groups, if your VPN endpoint does not support routing multiple subnets through the same connection, you need to create multiple site connections, one for each subnet/endpoint group.</p><h4 id="using-horizon-gui-6"> <a href="#using-horizon-gui-6" class="anchor-heading" aria-labelledby="using-horizon-gui-6"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Horizon (GUI)</h4><p>Within your project, navigate to <em>Network → VPN</em>, select <em>IPSec Site Connections</em> and click <em>Add IPSec Site Connection</em>.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_site_connection.png" alt="" /></a></p><p>Give your connection a name, select the previously created VPN service, local endpoint group, IKE and IPSec policy, Pre-Shared Key, Peer IP and router identity. For the purposes of this guide, we will assume that <code class="language-plaintext highlighter-rouge">2001:db8::4:703</code> is the IP address of the right router.</p><p><a href="https://optimist.gec.io/project/vpn/"><img src="attachments/horizon_create_site_connection_details.png" alt="" /></a></p><h4 id="using-the-cli-6"> <a href="#using-the-cli-6" class="anchor-heading" aria-labelledby="using-the-cli-6"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the CLI</h4><p>Use the <code class="language-plaintext highlighter-rouge">openstack vpn ipsec site connection create</code> command to create the VPN service.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ openstack vpn ipsec site connection create \
  vpnaas-left-connection \
  --vpnservice vpnaas-left-vpn \
  --ikepolicy vpnaas-left-ike-policy \
  --ipsecpolicy vpnaas-left-ipsec-policy \
  --local-endpoint-group vpnaas-left-local \
  --peer-address 2001:db8::4:703 \
  --peer-id 2001:db8::4:703 \
  --peer-endpoint-group vpnaas-left-remote \
  --psk 1gHAsAeR8lFEDDu7
+--------------------------+----------------------------------------------------+
| Field                    | Value                                              |
+--------------------------+----------------------------------------------------+
| Authentication Algorithm | psk                                                |
| Description              |                                                    |
| ID                       | d81dbe28-ccda-4ee3-ba96-145fadc74e0f               |
| IKE Policy               | 561387b8-b5c1-415e-abc9-79ba93dd48ff               |
| IPSec Policy             | 553a600e-f39d-47a0-9550-97f2b4033685               |
| Initiator                | bi-directional                                     |
| Local Endpoint Group ID  | 949ccc53-5dc6-457d-95bf-278fdf9a3e5d               |
| Local ID                 |                                                    |
| MTU                      | 1500                                               |
| Name                     | vpnaas-left-connection                             |
| Peer Address             | 2001:db8::4:703                                    |
| Peer CIDRs               |                                                    |
| Peer Endpoint Group ID   | 9146346d-1306-4b03-a3ce-04ee51832ed8               |
| Peer ID                  | 2001:db8::4:703                                    |
| Pre-shared Key           | 1gHAsAeR8lFEDDu7                                   |
| Project                  | 281fa14f782e4d4cbfd4e34a121c2680                   |
| Route Mode               | static                                             |
| State                    | True                                               |
| Status                   | PENDING_CREATE                                     |
| VPN Service              | cc258fd7-0e87-4058-ad7d-355f32c1ab5e               |
| dpd                      | {'action': 'hold', 'interval': 30, 'timeout': 120} |
| project_id               | 281fa14f782e4d4cbfd4e34a121c2680                   |
+--------------------------+----------------------------------------------------+
</code></pre></div></div></main><hr><footer> <br/><br/><br/><div class="footer-navigation-links"> <a class="footer-navigation-link footer-navigation-link--previous" href="/optimist/networking/octavia_loadbalancer/"> <svg class="footer-navigation-link__icon" viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> <span class="footer-navigation-link__sublabel">Previous</span> <span class="footer-navigation-link__label">Octavia Loadbalancers</span> </a> <a class="footer-navigation-link footer-navigation-link--next" href="/optimist/storage/"> <svg class="footer-navigation-link__icon" viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> <span class="footer-navigation-link__sublabel">Next</span> <span class="footer-navigation-link__label">Storage</span> </a></div><div class="footer-links"><div class=footer-hosted-with-love> <a href="https://github.com/gecio/gecio.github.io" target="_blank" rel="noopener noreferrer" >Hosted with love on GitHub</a></div><div class="footer-external-links"><ul><li class="footer-external-link"> <a href="https://gec.io" target="_blank" rel="noopener noreferrer" >Website</a ><li class="footer-external-link"> <a href="https://gec.io/impressum/" target="_blank" rel="noopener noreferrer" >Imprint</a ><li class="footer-external-link"> <a href="https://gec.io/datenschutz/" target="_blank" rel="noopener noreferrer" >Data Privacy</a ></ul></div></div></footer></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
